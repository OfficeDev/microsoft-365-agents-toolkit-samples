import axios from "axios";
// This file is auto generated by Microsoft 365 Agents Toolkit to provide you instructions and reference code to call your API.

/*
Next steps:
1. Run npm install. We added the @microsoft/teamsfx to your package.json.
   You need to run the command under the "bot" folder (instead of your project root folder).
2. Set `TEAMSFX_API_ALPHAVANTAGE_API_KEY` to your API key in the file `bot/.env.teamsfx.local`.

You can import the API client (an Axios instance) in another file and call alphaVantage APIs and authentication is now handled for you automatically.

Here is an example for a GET request to "relative_path_of_target_api":
```
import { alphaVantageClient } from "relative_path_to_this_file";

const response = await alphaVantageClient.get("relative_path_of_target_api");
// You only need to enter the relative path for your API.
// For example, if you want to call api https://my-api-endpoint/test and you configured https://my-api-endpoint as the API endpoint,
// your code will be: const response = await alphaVantageClient.get("test");

const responseBody = response.data;
```

If you added this API while local debugging, stop local debugging and start again because local debugging will not hot reload changes to `.env.teamsfx.local`.

Refer to https://aka.ms/teamsfx-connect-api to learn more. 
*/

// Load application configuration
// Initialize a new axios instance to call alphaVantage
const alphaVantageClient = axios.create({
  baseURL: process.env.TEAMSFX_API_ALPHAVANTAGE_ENDPOINT
});
alphaVantageClient.interceptors.request.use(
  async (config) => {
    config.params = config.params || {};
    config.params["apikey"] = process.env.TEAMSFX_API_ALPHAVANTAGE_API_KEY;

    return config;
  }
);
export { alphaVantageClient };

/* 
Setting API configuration for cloud environment: 
We have set configuration in `.env.teamsfx.local` based on your answers. 
Before you deploy your code to Azure using TeamsFx, follow https://aka.ms/teamsfx-add-appsettings to add the following configuration (with their appropriate values) to your Azure environment: 
TEAMSFX_API_ALPHAVANTAGE_ENDPOINT
TEAMSFX_API_ALPHAVANTAGE_API_KEY

Refer to https://aka.ms/teamsfx-connect-api to learn more. 
*/